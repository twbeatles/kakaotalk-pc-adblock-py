# 🛡️ KakaoTalk AdBlocker Pro v10.0

카카오톡 PC 버전을 위한 강력한 광고 차단 도구입니다. 최신 Windows API 기반의 광고 스니핑 엔진과 Hosts 파일 차단 방식을 결합하여 완벽한 광고 없는 환경을 제공합니다.

## ✨ 주요 기능

### 1. 🔍 고급 광고 스니핑 (Advanced Sniffing)
- **실시간 감지**: 윈도우 계층 구조를 실시간으로 분석하여 광고 창을 즉시 찾아냅니다.
- **다중 전략 탐지**: 클래스명, 윈도우 크기, 위치 등 다양한 휴리스틱 알고리즘으로 광고를 정밀하게 식별합니다.
- **64비트 호환성**: 최신 Windows 10/11 64비트 환경에서도 안정적으로 동작합니다.
- **스마트 리사이징**: 광고 배너를 숨긴 후 남은 빈 공간을 채팅창으로 자연스럽게 채워줍니다.

### 2. ⚡ 강력한 차단 기능
- **팝업 킬러**: 우측 하단에 뜨는 'RichPopWnd' 광고 팝업을 생성 즉시 자동으로 닫습니다.
- **배너 숨김**: 대화 목록 상단/하단 및 임베디드 웹뷰 광고를 감지하여 숨깁니다.
- **AdFit 레지스트리 차단**: 카카오톡 내부 광고 설정(AdFit)을 비활성화하여 광고 로드를 원천 차단합니다.
- **네트워크 차단**: Hosts 파일을 수정하여 광고 서버와의 통신을 차단합니다 (관리자 권한 필요).

### 3. 🎨 사용자 친화적 UI
- **모던 디자인**: 다크 모드/라이트 모드를 지원하는 깔끔한 인터페이스.
- **실시간 대시보드**: 차단된 광고, 팝업, 배너 통계를 실시간으로 확인 가능.
- **트레이 모드**: 최소화 시 시스템 트레이에서 백그라운드로 조용히 작동합니다.
- **감도 조절**: 사용자 환경에 맞춰 탐지 민감도를 '낮음/보통/높음'으로 설정할 수 있습니다.

### 4. 🔒 안전 및 개인정보 보호
- **안전한 저장**: 설정 파일 및 시스템 파일 수정 시 원자적 쓰기(Atomic Write)를 사용하여 데이터 손상을 방지합니다.
- **리소스 최적화**: 메모리 누수 방지 및 CPU 사용량 최소화 로직 적용.
- **개인정보 보호**: 로그 파일에 윈도우 제목 등 민감 정보가 남지 않도록 마스킹 처리됩니다.

---

## 📦 설치 및 실행

### 필수 요구 사항
- Windows 10 또는 11 (64비트 권장)
- Python 3.8 이상

### 설치

1. 저장소를 클론하거나 다운로드합니다.
2. 필요한 라이브러리를 설치합니다:
   ```bash
   pip install PyQt6 psutil darkdetect
   ```

### 실행

**일반 실행** (스니핑 기능만 사용):
```bash
python "카카오톡 광고제거 v10.0.py"
```

**전체 기능 사용** (Host 차단 포함):
- 프로그램을 **관리자 권한**으로 실행해야 Hosts 파일 수정 및 일부 시스템 기능이 정상 작동합니다.
- CMD/PowerShell을 관리자 권한으로 열고 실행하거나, 생성된 exe 파일을 우클릭하여 관리자 권한으로 실행하세요.

---

## 📖 사용 방법

1. **대시보드**: 현재 차단 현황을 확인하고 '지금 최적화' 버튼으로 Hosts 차단을 적용할 수 있습니다.
2. **설정**:
   - **스니핑 감도**: 광고가 잘 안 지워지면 '높음', 오탐이 있으면 '낮음'으로 조절하세요.
   - **자동 실행**: Windows 시작 시 프로그램이 자동 실행되도록 설정할 수 있습니다.
3. **트레이 아이콘**: 프로그램을 닫거나 최소화하면 트레이 아이콘으로 숨겨지며, 더블 클릭하면 창이 다시 열립니다. 우클릭 메뉴로 종료할 수 있습니다.

---

## 🔧 문제 해결

**Q. 프로그램이 실행되지 않아요.**
A. Python과 필수 라이브러리가 설치되어 있는지 확인해주세요.

**Q. '관리자 권한이 필요합니다' 메시지가 떠요.**
A. Hosts 파일 수정 기능은 시스템 권한이 필요합니다. 프로그램을 관리자 권한으로 다시 실행해주세요.

**Q. 광고가 여전히 보여요.**
A. 
1. 대시보드에서 '지금 최적화'를 실행하여 Hosts 차단을 적용해보세요.
2. 설정에서 스니핑 감도를 '높음'으로 변경해보세요.
3. 카카오톡을 완전히 종료 후 재시작해보세요.

---

## 🛠️ 개발자 도구

문제가 발생하거나 새로운 광고 패턴 분석이 필요한 경우, 내장된 진단 도구를 사용할 수 있습니다.

```bash
# 윈도우 계층 구조 분석 (JSON 출력)
python window_inspector.py --json

# 스니핑 엔진만 독립 실행 (터미널 로그 확인)
python ad_sniffer.py --inspect
```

---

## 📁 파일 구조

```
├── 카카오톡 광고제거 v10.0.py  # 메인 GUI 애플리케이션
├── ad_sniffer.py               # 핵심 광고 탐지 엔진
├── window_inspector.py         # 윈도우 계층 분석 및 진단 도구
└── README.md                   # 설명서
```

## ⚠️ 라이선스 및 주의사항

이 프로그램은 연구 및 학습 목적으로 제작되었습니다.
- **MIT License**
- 카카오톡의 업데이트에 따라 기능이 제한될 수 있습니다.
