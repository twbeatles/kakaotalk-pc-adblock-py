{
    "_comment": "카카오톡 광고차단 패턴 설정 파일 - 광고 클래스/텍스트 패턴을 외부에서 관리",
    "version": "1.1.0",
    "last_updated": "2026-01-21",
    "window_classes": {
        "main_window": [
            "EVA_Window",
            "EVA_Window_Dblclk"
        ],
        "description": "카카오톡 메인 윈도우 클래스명 (EVA_Window_Dblclk 추가됨)"
    },
    "title_filters": {
        "main_window_titles": [
            "카카오톡",
            "KakaoTalk"
        ],
        "description": "메인 윈도우로 인식할 타이틀 키워드"
    },
    "ad_patterns": {
        "hide": [
            {
                "type": "text_startswith",
                "value": "BannerAdView",
                "description": "하단 배너 광고"
            },
            {
                "type": "text_startswith",
                "value": "AdView",
                "description": "일반 광고 뷰"
            },
            {
                "type": "text_startswith",
                "value": "LockScreenAdView",
                "description": "잠금화면 광고"
            },
            {
                "type": "text_contains",
                "value": "AdBanner",
                "description": "광고 배너 포함"
            },
            {
                "type": "text_contains",
                "value": "AdFit",
                "description": "AdFit 광고 (Chrome 기반)"
            },
            {
                "type": "text_contains",
                "value": "Advertisement",
                "description": "Advertisement 포함 윈도우"
            },
            {
                "type": "class_equals",
                "value": "EVA_ChildWindow_D498",
                "description": "특정 광고 클래스 (버전별 변동 가능)"
            }
        ],
        "description": "숨길 광고 요소 패턴 목록"
    },
    "resize_patterns": {
        "targets": [
            {
                "type": "text_startswith",
                "value": "OnlineMainView",
                "description": "메인 채팅 목록 뷰"
            },
            {
                "type": "text_startswith",
                "value": "ContactListView",
                "description": "연락처 목록 뷰"
            },
            {
                "type": "text_startswith",
                "value": "ChatRoomListView",
                "description": "채팅방 목록 뷰"
            },
            {
                "type": "text_startswith",
                "value": "ChatRoomListCtrl",
                "description": "채팅방 목록 컨트롤 (실제 리스트)"
            },
            {
                "type": "text_startswith",
                "value": "ContactListCtrl",
                "description": "연락처 목록 컨트롤 (실제 리스트)"
            },
            {
                "type": "text_regex",
                "value": "(OnlineMainView|ChatRoomListView|ContactListView).*",
                "description": "뷰 이름 폴백(정규식)"
            }
        ],
        "description": "광고 제거 후 리사이즈할 요소 패턴"
    },
    "layout_heuristics": {
        "enabled": true,
        "min_height_px": 50,
        "max_height_px": 250,
        "min_width_ratio": 0.8,
        "bottom_margin_px": 25,
        "class_allowlist": [],
        "class_blocklist": [],
        "description": "Layout-based detection for bottom banner ads"
    },
    "layout_engine": {
        "enabled": true,
        "banner_score_threshold": 6,
        "candidate_min_height_px": 50,
        "candidate_max_height_px": 250,
        "candidate_min_width_ratio": 0.8,
        "candidate_bottom_margin_px": 25,
        "diagnostic_sample": 5,
        "excluded_classes": [
            "_EVA_CustomScrollCtrl",
            "Edit",
            "Intermediate D3D Window",
            "Chrome_RenderWidgetHostHWND"
        ],
        "score_weights": {
            "is_chrome_widget": 3,
            "title_contains_ad_token": 4,
            "height_in_band": 2,
            "overlap_ratio_high": 2,
            "bottom_aligned_strong": 2,
            "is_content_view": -5,
            "is_eva_child": 1
        },
        "description": "v10.x score-based banner detection (geometry + signals)"
    },
    "timing": {
        "scan_interval_active_ms": 500,
        "scan_interval_idle_ms": 2000,
        "resize_threshold_px": 5,
        "min_view_height_px": 100,
        "event_dedupe_ms": 500,
        "description": "스캔 주기 및 리사이즈/이벤트 중복 억제"
    },
    "event_hook": {
        "enabled": true,
        "fallback_polling": true,
        "description": "v10.0 이벤트 훅 설정 - SetWinEventHook 사용 여부 및 폴백 폴링"
    },
    "uia": {
        "enabled": true,
        "scan_interval_ms": 3000,
        "max_depth": 8,
        "description": "pywinauto(UIA) 기반 보조 스캔 설정"
    },
    "logging": {
        "log_hidden_ads": true,
        "log_resizes": false,
        "description": "로깅 설정"
    }
}
